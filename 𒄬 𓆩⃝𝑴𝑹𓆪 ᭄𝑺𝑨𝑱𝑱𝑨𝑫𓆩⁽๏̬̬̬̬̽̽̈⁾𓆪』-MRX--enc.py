import base64
exec(base64.b64decode("I0Z1Q2sgGg0KIyEvdXNyL2Jpbi9weXRob24zDQojLS0tLS0tLS0tLS0tLS0tLS0tLS0tW0lNUE9SVF0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jDQpmcm9tIGJzNCBpbXBvcnQgQmVhdXRpZnVsU291cCBhcyBzb3ANCmZyb20gY29uY3VycmVudC5mdXR1cmVzIGltcG9ydCBUaHJlYWRQb29sRXhlY3V0b3IgYXMgdHJlZA0KaW1wb3J0IG9zLHN5cyx0aW1lLGpzb24scmFuZG9tLHJlLHN0cmluZyxwbGF0Zm9ybSxiYXNlNjQscGxhdGZvcm0sdXVpZA0KaW1wb3J0IHJlcXVlc3RzLHJhbmRvbSxzeXMsanNvbixvcyxyZQ0KZnJvbSB0aW1lIGltcG9ydCBzbGVlcA0KZnJvbSBvcyBpbXBvcnQgc3lzdGVtDQppbXBvcnQgb3Msc3lzLHRpbWUsZGF0ZXRpbWUscmFuZG9tLGhhc2hsaWIscmUsdGhyZWFkaW5nLGpzb24sdXJsbGliLHV1aWQsaXBhZGRyZXNzLGNhbGVuZGFyLHJlcXVlc3RzLG1lY2hhbml6ZSxiczQsc3lzLG9zLHN1YnByb2Nlc3MsdXVpZCxyZXF1ZXN0cyxzeXMscmFuZG9tLHRpbWUscmUsYmFzZTY0LGpzb24scGxhdGZvcm0NCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGUNCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lDQpmcm9tIHRpbWUgaW1wb3J0IHNsZWVwDQpmcm9tIHRpbWUgaW1wb3J0IHNsZWVwIGFzIHdha3R1DQpmcm9tIHJhbmRvbSBpbXBvcnQgcmFuZG9tIGFzIGFjYWsNCmZyb20gcmFuZG9tIGltcG9ydCBjaG9pY2UgYXMgcGlsaWgNCmZyb20gcmFuZG9tIGltcG9ydCByYW5kaW50DQpmcm9tIGJzNCBpbXBvcnQgQmVhdXRpZnVsU291cA0KaW1wb3J0IHJlcXVlc3RzIGFzIHJlc3MNCmZyb20gc3lzIGltcG9ydCBleGl0IGFzIGV4aXQNCmNsYXNzIGphbGFuOg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCB6KToNCiAgICAgICAgZm9yIGUgaW4geiArICJcbiI6DQogICAgICAgICAgICBzeXMuc3Rkb3V0LndyaXRlKGUpDQogICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkNCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMC4wMDkpDQogDQojIyMtLS0tLS0tLS0tWyBJTVBPUlQgTElCUkFSWSBdLS0tLS0tLS0tLSAjIyMNCmltcG9ydCByZXF1ZXN0cw0KaW1wb3J0IGJzNA0KaW1wb3J0IHN5cw0KaW1wb3J0IG9zDQppbXBvcnQgcmFuZG9tDQppbXBvcnQgdGltZQ0KaW1wb3J0IHJlDQppbXBvcnQganNvbg0KaW1wb3J0IHV1aWQNCmltcG9ydCBzdWJwcm9jZXNzDQppbXBvcnQgbWFyc2hhbA0KaW1wb3J0IHJpY2gNCmltcG9ydCBzaHV0aWwNCmltcG9ydCB3ZWJicm93c2VyDQpmcm9tIHJhbmRvbSBpbXBvcnQgcmFuZGludA0KZnJvbSBjb25jdXJyZW50LmZ1dHVyZXMgaW1wb3J0IFRocmVhZFBvb2xFeGVjdXRvciBhcyBUaHJlYWRQb29sDQpmcm9tIGJzNCBpbXBvcnQgQmVhdXRpZnVsU291cCBhcyBwYXINCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGUNCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lDQojIGZyb20gcmljaCBpbXBvcnQgcHJpbnQgYXMgcHJpbnRlcg0KZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZQ0KaW1wb3J0IG1hcnNoYWwNCnRyeToNCiAgICBpbXBvcnQgcmVxdWVzdHMNCiAgICBmcm9tIGNvbmN1cnJlbnQuZnV0dXJlcyBpbXBvcnQgVGhyZWFkUG9vbEV4ZWN1dG9yIGFzIFRocmVhZFBvb2wNCiAgICBpbXBvcnQgbWVjaGFuaXplDQogICAgZnJvbSByZXF1ZXN0cy5leGNlcHRpb25zIGltcG9ydCBDb25uZWN0aW9uRXJyb3INCmV4Y2VwdCBNb2R1bGVOb3RGb3VuZEVycm9yOg0KICAgIG9zLnN5c3RlbSgncGlwIGluc3RhbGwgbWVjaGFuaXplIHJlcXVlc3RzIGZ1dHVyZXM9PTIgPiAvZGV2L251bGwnKQ0KICAgIG9zLnN5c3RlbSgncHl0aG9uIEhhbWlpLnB5JykNCmZyb20gYnM0IGltcG9ydCBCZWF1dGlmdWxTb3VwDQpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRlDQpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQ0KZnJvbSB0aW1lIGltcG9ydCBzbGVlcA0KZnJvbSB0aW1lIGltcG9ydCBzbGVlcCBhcyB3YWt0dQ0KdWdlbiA9IFtdDQogDQpBID0gJ1x4MWJbMTs5N20nIA0KQiA9ICdceDFiWzE7OTZtJyANCkMgPSAnXHgxYlsxOzkxbScgDQpEID0gJ1x4MWJbMTs5Mm0nDQpNID0gJ1wwMzNbMTszMW0nDQpIID0gJ1wwMzNbMTszMm0nDQpOID0gJ1x4MWJbMTszN20nICAgIA0KRSA9ICdceDFiWzE7OTNtJyANCkYgPSAnXHgxYlsxOzk0bScNCkcgPSAnXHgxYlsxOzk1bScNClAgPSAnXDAzM1sxOzM3bScNClJFRCA9ICdcMDMzWzE7OTFtJw0KV0hJVEUgPSAnXDAzM1sxOzk3bScNCkdSRUVOID0gJ1wwMzNbMTszMm0nICMNCllFTExPVyA9ICdcMDMzWzE7MzNtJw0KQkxVRSA9ICdcMDMzWzE7MzRtJw0KT1JBTkdFID0gJ1wwMzNbMTszNW0nDQpub3cgPSBkYXRldGltZS5ub3coKQ0KZHRfc3RyaW5nID0gbm93LnN0cmZ0aW1lKCIlSDolTSIpDQpjdXJyZW50ID0gZGF0ZXRpbWUubm93KCkNCnRhID0gY3VycmVudC55ZWFyDQpidSA9IGN1cnJlbnQubW9udGgNCmhhID0gY3VycmVudC5kYXkNCnRvZGF5ID0gZGF0ZS50b2RheSgpDQpTQUpKQUQgPSAiXDAzM1sxOzMzbRpcMDMzWzE7MzJtGlx4MWJbMG0iDQpmb3IgeGQgaW4gcmFuZ2UoMTAwMDApOg0KICAgIHg9J01vemlsbGEvNS4wIChMaW51eDsgVTsgQW5kcm9pZCcNCiAgICBiPXJhbmRvbS5jaG9pY2UoWyc2JywnNycsJzgnLCc5JywnMTAnLCcxMScsJzEyJ10pDQogICAgYz0nIGVuLXVzOyBHVC0nDQogICAgZD1yYW5kb20uY2hvaWNlKFsnQScsJ0InLCAnQycsICdEJywgJ0UnLCAnRicsICdHJywgJ0gnLCAnSScsICdKJywgJ0snLCAnTCcsICdNJywgJ04nLCAnTycsICdQJywgJ1EnLCAnUicsICdTJywgJ1QnLCAnVScsICdWJywgJ1cnLCAnWCcsICdZJywgJ1onXSkNCiAgICBlPXJhbmRvbS5yYW5kcmFuZ2UoMSwgOTk5KQ0KICAgIGY9cmFuZG9tLmNob2ljZShbJ0EnLCdCJywgJ0MnLCAnRCcsICdFJywgJ0YnLCAnRycsICdIJywgJ0knLCAnSicsICdLJywgJ0wnLCAnTScsICdOJywgJ08nLCAnUCcsICdRJywgJ1InLCAnUycsICdUJywgJ1UnLCAnVicsICdXJywgJ1gnLCAnWScsICdaJ10pDQogICAgZz0nQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLycNCiAgICBoPXJhbmRvbS5yYW5kcmFuZ2UoNzMsMTAwKQ0KICAgIGk9JzAnDQogICAgaj1yYW5kb20ucmFuZHJhbmdlKDQyMDAsNDkwMCkNCiAgICBrPXJhbmRvbS5yYW5kcmFuZ2UoNDAsMTUwKQ0KICAgIGw9J01vYmlsZSBTYWZhcmkvNTM3LjM2Jw0KICAgIHVha3UyPWYne3h9IHtifTsge2N9e2R9e2V9e2Z9KSB7Z317aH0ue2l9LntqfS57a30ge2x9Jw0KICAgIHVnZW4uYXBwZW5kKHVha3UyKQ0KdHJ5Og0KICAgIG9zLnN5c3RlbSgnY3VybCBodHRwczovL2JhY2hvMTAwMS5ibG9nc3BvdC5jb20vMjAyMi8wNy91YS5odG1sIC1vIHVhLmh0bWwnKQ0KZXhjZXB0Og0KICAgIHBhc3MNCnNvY2s9b3BlbigndWEuaHRtbCcsJ3InKS5yZWFkKCkuc3BsaXRsaW5lcygpDQpkZWYgdWFrdSgpOg0KICAgIHRyeToNCiAgICAgICAgdWE9b3BlbignYmJuZXcudHh0JywncicpLnJlYWQoKS5zcGxpdGxpbmVzKCkNCiAgICAgICAgZm9yIHViIGluIHVhOg0KICAgICAgICAgICAgdWdlbi5hcHBlbmQodWIpDQogICAgZXhjZXB0Og0KICAgICAgICBhPXJlcXVlc3RzLmdldCgnaHR0cHM6Ly9iYWNobzEwMDEuYmxvZ3Nwb3QuY29tLzIwMjIvMDcvdWEuaHRtbCcpLnRleHQNCiAgICAgICAgdWE9b3BlbignLnVzZXItYWdlbnRzLnR4dCcsJ3cnKQ0KICAgICAgICBhYT1yZS5maW5kYWxsKCdsaW5lIj4oLio/KTwnLHN0cihhKSkNCiAgICAgICAgZm9yIHVuIGluIGFhOg0KICAgICAgICAgICAgdWEud3JpdGUodW4rJ1xuJykNCiAgICAgICAgdWE9b3BlbignLnVzZXItYWdlbnRzLnR4dCcsJ3InKS5yZWFkKCkuc3BsaXRsaW5lcygpDQogDQpsb29wID0gMA0KY3AgPSBbXQ0Kb2sgPSBbXQ0KdHdmID0gW10NCiANCmRlZiBjbGVhcigpOg0KICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgIHByaW50KGxvZ28pDQpmcm9tIHRpbWUgaW1wb3J0IGxvY2FsdGltZSBhcyBsdA0KZnJvbSBvcyBpbXBvcnQgc3lzdGVtIGFzIGNtZA0KbHR4ID0gaW50KGx0KClbM10pDQppZiBsdHggPiAxMjoNCiAgICBhID0gbHR4LTEyDQogICAgdGFnID0gIlBNIg0KZWxzZToNCiAgICBhID0gbHR4DQogICAgdGFnID0gIkFNIg0KbG9nbyA9ZiIiIg0KXHgxYlsxOzk1bSAgX18gIF9fIF9fX18gICAgX19fXyAgICBfICAgICAgIF8gICAgIF8gICBfICAgIF9fX18gIA0KXHgxYlsxOzkzbXwgIFwvICB8ICBfIFwgIC8gX19ffCAgLyBcICAgICB8IHwgICB8IHwgLyBcICB8ICBfIFwgDQpceDFiWzE7MzVtfCB8XC98IHwgfF8pIHwgXF9fXyBcIC8gXyBcIF8gIHwgfF8gIHwgfC8gXyBcIHwgfCB8IHwNClx4MWJbMTs5Mm18IHwgIHwgfCAgXyA8IF8gX19fKSAvIF9fXyB8IHxffCB8IHxffCAvIF9fXyBcfCB8X3wgfA0KXHgxYlsxOzM0bXxffCAgfF98X3wgXF8oIHxfX19fL18vICAgXF9cX19fLyBcX19fL18vICAgXF98X19fXy8gDQpcMDMzWzE7OTJtICAgIF8gICAgICAgICAgXw0KXDAzM1sxOzkybSAgICAgXFwgICAgICAgIC8NClwwMzNbMTs5Mm0gICAgX19cXF9fX19fXy9fXw0KXDAzM1sxOzkybSAgICB8IFtcMDMzWzE7MzE7MW2pXDAzM1sxOzkybV0gIFtcMDMzWzE7MzE7MW2pXDAzM1sxOzkybV0gfBoNCiBcMDMzWzE7OTJtICAgfCAgW1wzM1sxOzMzbT09PT1cMDMzWzE7OTJtXSAgfCBbK10gGhoaGhoaGiAaGhoaGhoaGhoaICBbK10NClwwMzNbMTs5Mm0aGhpvMDAaGhoaGhoaGjAwbxoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaDQpcMDMzWzE7MzE7MW0aIFwwMzNbMTs5Mm0gW5VdIFwwMzNbMTszMTsxbUF1dGhvciAgICA6ICBcMDMzWzE7OTJtIBogGiAtGiAaIBogGiAaIBogICAgICAgICAgICBcMDMzWzE7MzE7MW0gGg0KXDAzM1sxOzMxOzFtGiBcMDMzWzE7OTJtIFuVXSBcMDMzWzE7MzE7MW1XaGF0c2FwcCAgOiAgXDAzM1sxOzkybSArGhoaGhoaGi0aGhoaGhogICAgICAgIFwwMzNbMTszMTsxbSAaDQpcMDMzWzE7MzE7MW0aIFwwMzNbMTs5Mm0gW5VdIFwwMzNbMTszMTsxbVdoYXRzYXBwICA6IFwwMzNbMTs5Mm0gICsaGhoaGhoaLRoaGhoaGiAgICAgICAgICAgXDAzM1sxOzMxOzFtIBoNClwwMzNbMTszMTsxbRogXDAzM1sxOzkybSBblV0gXDAzM1sxOzMxOzFtR29ydXAgRmIgIDogIFwwMzNbMTs5Mm0gGhoaGiAaGhoaIFwwMzNbMTszMTsxbSAaDQpcMDMzWzE7MzE7MW0aIFwwMzNbMTs5Mm0gW5VdIFwwMzNbMTszMTsxbVZlcnNpb24gICA6ICBcMDMzWzE7OTJtIDAuMyAgICAgICAgICAgICAgICAgIFwwMzNbMTszMTsxbRoNClwwMzNbMTs5Mm0aGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaDQoNCg0KIiIiDQogDQpkZWYgbGluZXgoKToNCiAgICBwcmludChmJ3tSRUR9X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXycpDQpkZWYgY2hlY2tzKG9rLGNwKToNCiAgICBpZiBub3QgbGVuKG9rKSAhPSAwOg0KICAgICAgICBwYXNzDQogICAgaWYgbGVuKGNwKSAhPSAwOg0KICAgICAgICBwcmludCgnXG5cblx4MWJbMTs5N20gVE9UQUwgT0sgOiBceDFiWzE7OTdtICVzICBceDFiWzE7OTdtU0FKSkFELU9LLnR4dCcgJSAoDQogICAgICAgICAgICBILCBQLCBzdHIobGVuKG9rKSkpKQ0KICAgICAgICBwcmludCgnXHgxYlsxOzk3bSBUT1RBTCBDUCA6XHgxYlsxOzk3bSAgICVzIFx4MWJbMTs5N21TQUpKQUQtQ1AudHh0JyAlDQogICAgICAgICAgICAgIChILCBQLCBzdHIobGVuKGNwKSkpKQ0KICAgICAgICBpbnB1dCgiXHgxYlsxOzk3bVBSRVNFIEVOVEVSIFRPIEJBQ0sgTUVOVSAiKQ0KICAgICAgICB4eXooKQ0KIy0tLS0tLS0tLS0tLS0tLS0tLS0tLVtMT09QIE1FTlVdLS0tLS0tLS0tLS0tLS0tLS0tLS0tIw0KbG9vcCA9IDANCmNwID0gW10NCm9rID0gW10NCnR3ZiA9IFtdDQogDQogDQogDQpkZWYgbWFpbigpOg0KICAgIG9zLnN5c3RlbSgiY2xlYXIiKQ0KICAgIHByaW50KGxvZ28pDQogICAgcHJpbnQoNDcqIi0iKQ0KICAgIHByaW50KGMsIDQ1KiItIikNCiAgICBwcmludCgiXHQgIEZhY2Vib29rIDogU0FKSkFEcmF6b3IiKQ0KICAgIHByaW50KCJcdCAgVE9PTCA6ICBQQUsgfCBCRCIpDQogICAgcHJpbnQoIlx0ICBHaXRodWIgICA6IFNBSkpBRHJhem9yIikNCiAgICBwcmludChjLCA0NSoiLSIpDQogICAgcHJpbnQoNDcqIi0iKQ0KICAgIHByaW50KHJlZCwiIHBsZWFzZSBvbiBpbnRlcm5ldCB3aWZpL2RhdGEgIikNCiAgICBwcmludCgiXHQgV2VsY29tZSAuLi4uIikNCiAgICB0aW1lLnNsZWVwKDIpDQogICAgeHl6KCkNCiANCiANCiMtLS0tLS0tLS0tLS0tLS0tLS0tLS1bQVBQTElDQVRJT04gQ0hFQ0tFUl0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jDQpkZWYgY2VrX2FwayhzZXNzaW9uLGNva2kpOg0KICAgIHc9c2Vzc2lvbi5nZXQoImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9zZXR0aW5ncy9hcHBzL3RhYmJlZC8/dGFiPWFjdGl2ZSIsY29va2llcz17ImNvb2tpZSI6Y29raX0pLnRleHQNCiAgICBzb3AgPSBCZWF1dGlmdWxTb3VwKHcsImh0bWwucGFyc2VyIikNCiAgICB4ID0gc29wLmZpbmQoImZvcm0iLG1ldGhvZD0icG9zdCIpDQogICAgZ2FtZSA9IFtpLnRleHQgZm9yIGkgaW4geC5maW5kX2FsbCgiaDMiKV0NCiAgICBpZiBsZW4oZ2FtZSk9PTA6DQogICAgICAgIHByaW50KGYnXHIlc1slcyElc10gJXNTb3JyeSB0aGVyZSBpcyBubyBBY3RpdmUgIEFwayVzICAnJShOLE0sTixNLE4pKQ0KICAgIGVsc2U6DQogICAgICAgIHByaW50KGYnXHJbGl0gJXMgGiBZb3VyIEFjdGl2ZSBBcHBzIBogICAgIDp7V0hJVEV9JyUoR1JFRU4pKQ0KICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4oZ2FtZSkpOg0KICAgICAgICAgICAgcHJpbnQoZiJcclslcyVzXSAlcyVzIiUoTixpKzEsZ2FtZVtpXS5yZXBsYWNlKCJEaXRhbWJhaGthbiBwYWRhIiwiIERpdGFtYmFoa2FuIHBhZGEiKSxOKSkNCiAgICAgICAgI2Vsc2U6DQogICAgICAgICAgICAjcHJpbnQoZidcciAlc1slcyElc10gU29ycnksIEFwayBjaGVjayBmYWlsZWQgaW52YWxpZCBjb29raWUnJShOLE0sTikpDQogICAgdz1zZXNzaW9uLmdldCgiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tL3NldHRpbmdzL2FwcHMvdGFiYmVkLz90YWI9aW5hY3RpdmUiLGNvb2tpZXM9eyJjb29raWUiOmNva2l9KS50ZXh0DQogICAgc29wID0gQmVhdXRpZnVsU291cCh3LCJodG1sLnBhcnNlciIpDQogICAgeCA9IHNvcC5maW5kKCJmb3JtIixtZXRob2Q9InBvc3QiKQ0KICAgIGdhbWUgPSBbaS50ZXh0IGZvciBpIGluIHguZmluZF9hbGwoImgzIildDQogICAgaWYgbGVuKGdhbWUpPT0wOg0KICAgICAgICBwcmludChmJ1xyJXNbJXMhJXNdICVzU29ycnkgdGhlcmUgaXMgbm8gRXhwaXJlZCBBcGslcyAgICAgICAgICAgXG4nJShOLE0sTixNLE4pKQ0KICAgIGVsc2U6DQogICAgICAgIHByaW50KGYnXHJbGl0gJXMgGiBZb3VyIEV4cGlyZWQgQXBwcyAaICAgIDp7V0hJVEV9JyUoTSkpDQogICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihnYW1lKSk6DQogICAgICAgICAgICBwcmludChmIlxyWyVzJXNdICVzJXMiJShOLGkrMSxnYW1lW2ldLnJlcGxhY2UoIktlZGFsdXdhcnNhIiwiIEtlZGFsdXdhcnNhIiksTikpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBwcmludCg1NyonLScpDQogDQogDQojLS0tLS0tLS0tLS0tLS0tLS0tLS0tW01BSU4gTUVOVV0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jDQpkZWYgeHl6KCk6DQogICAgb3Muc3lzdGVtKCJwbGF5LWF1ZGlvIFdFTENPTUVfVE9fU0FKSkFEX1JBTkRPTV9DTE9ORV9UT09MLm1wMyIpDQogICAgb3MuZ2V0dWlkDQogICAgDQogICAgb3Muc3lzdGVtKCJjbGVhciIpO3ByaW50KGxvZ28pDQogICAgcHJpbnQoJyAgICAgICAgICAgXHgxYls5N21bXDAzM1szNzs0MW0gIE0gQSBJIE4gICBNIEUgTiBVICAgXDAzM1swO21dICcpDQogICAgcHJpbnQoZiIiKQ0KICAgIHByaW50KGYne0JMVUV9X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXycpDQogICAgcHJpbnQoZiIge1dISVRFfVRPREFZIERBVEUgJiBUSU1FICAgICA6e1JFRH0ge2hhfS97YnV9L3t0YX0ge09SQU5HRX1+PiB7R1JFRU59ICIrc3RyKGEpKyI6IitzdHIobHQoKVs0XSkrIiAiKyB0YWcrIiAiKQ0KICAgIHByaW50KGYie0JMVUV9X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXyIpDQogICAgcHJpbnQoZiIiKQ0KICAgIHByaW50KGYie0J9WzAxXSB7V0hJVEV9UkFORE9NIENMT05FIFBBSyAgTTEiKQ0KICAgIHByaW50KGYie0J9WzAyXSB7V0hJVEV9UkFORE9NIENMT05FIEJEICBNMSIpDQogICAgcHJpbnQoZiIiKQ0KICAgIHByaW50KGYiXDAzM1sxOzkxbV9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18iKQ0KICAgIGhhbWlpID0gaW5wdXQoIlsaXSBDSE9PU0UgOiAiKQ0KICAgIGlmIGhhbWlpIGluIFsiMSIsIjAxIl06DQogICAgICAgIA0KICAgICAgICBwYXNzd29yZCgpDQogICAgZWxpZiBoYW1paSBpbiBbIjIiLCIwMiJdOg0KICAgICAgICBUYWJpaTIoKQ0KICAgIGVsaWYgaGFtaWkgaW4gWyIwIiwiMDAiXToNCiAgICAgICBleGl0KCkNCiAgICBlbHNlOg0KICAgICAgICBwcmludCgnXDAzM1sxOzMxbUlOQ09SRUNUIE9QVElPTiFcMDMzWzE7MzFtJykNCiAgICAgICAgeHl6KCkNCiMtLS0tLS0tLS0tLS0tLS0tLS0tLS1bUEFTUyBERUZdLS0tLS0tLS0tLS0tLS0tLS0tLS0tIw0KZGVmIHBhc3N3b3JkKCk6DQogICAgDQogICAgb3Muc3lzdGVtKCJjbGVhciIpDQogICAgcHJpbnQobG9nbykNCiAgICBwcmludCgnICAgICAgIFx4MWJbOTdtW1wwMzNbMzc7NDFtICBQIEEgUyBTIFcgTyBSIEQgICBNIEUgTiBVICAgXDAzM1swO21dICcpDQogICAgcHJpbnQoZiIiKQ0KICAgIHByaW50KGYie0J9WzAxXSB7V0hJVEV9IDEgUEFTU1dPUkQgICB7R1JFRU59IFsgRkFTVEVTVBpdIikNCiAgICBwcmludChmIntCfVswMl0ge1dISVRFfSAyIFBBU1NXT1JEUyAge0dSRUVOfSBbIEZBU1QgIBpdIikNCiAgICBwcmludChmIntCfVswM10ge1dISVRFfSA1IFBBU1NXT1JEUyAge0dSRUVOfSBbIFNMT1cgICAaXSIpDQogICAgbGluZXgoKQ0KICAgIHByaW50KCIiKQ0KICAgIHBhc3NYID0gaW5wdXQoZiIge1JFRH1DSE9PU0V7U0FKSkFEfSA6ICIpDQogICAgaWYgcGFzc1ggaW4gWycxJywnMDEnXToNCiAgICAgICAgcGFzc3dvcmQxKCkNCiAgICBlbGlmIHBhc3NYIGluIFsnMicsJzAyJ106DQogICAgICAgIHBhc3N3b3JkMigpDQogICAgZWxpZiBwYXNzWCBpbiBbJzMnLCcwMyddOiAgICANCiAgICAgICAgcGFzc3dvcmQ1KCkNCiAgICBlbHNlOg0KICAgICAgICB4eXooKQ0KIy0tLS0tLS0tLS0tLS0tLS0tLS0tLVtDTE9OSU5HIE1BSU4gREVGXS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMNCiMtLS0tLS0tLS0tLS0tLS0tLS0tLS1bUEFTUyAxIENMT05JTkcgTUVOVV0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jDQpkZWYgcGFzc3dvcmQxKCk6DQogICAgDQogICAgdXNlcj1bXQ0KICAgIHR3ZiA9W10NCiAgICBvcy5nZXR1aWQNCiAgICBvcy5nZXRldWlkDQogICAgb3Muc3lzdGVtKCJjbGVhciIpDQogICAgcHJpbnQobG9nbykNCiAgICBwcmludChmIiIpDQogICAgY2xlYXIoKQ0KICAgIHByaW50KGYiICAgICAgICAgIFx4MWJbOTdtW1wwMzNbMzc7NDFtICBDIE8gRCBFICAgIE0gRSBOIFUgICBcMDMzWzA7bV0iKQ0KICAgIHByaW50KGYiIikNCiAgICBsaW5leCgpDQogICAgcHJpbnQoZiIiKQ0KICAgIHByaW50KGYiIDAzMDYgLDAzMDAgLDAzMTUgLDAzMzMiKQ0KICAgIHByaW50KGYiIDAzNDEgLDAzNDIgLDAzNDUgLDAzNDkiKQ0KICAgIHByaW50KGYiIDAzMjEgLDAzMTYgLDAzMDggLDAzMDkiKQ0KICAgIHByaW50KGYiIikNCiAgICBsaW5leCgpDQogICAgcHJpbnQoZiJceDFiWzk3bVtcMDMzWzM3OzQxbUJFU1QgQ09ERSAwMzAwIC8gMDMwMiAvIDAzMDYgLyAwMzQ5IC8wMzE1ICAgXDAzM1swO21dIikNCiAgICBwcmludCgiIikNCiAgICBsaW5leCgpDQogICAgY29kZSA9IGlucHV0KCcgUFVUIENPREUgOiAnKQ0KICAgIG9zLnN5c3RlbSgiY2xlYXIiKQ0KICAgIHByaW50KGxvZ28pDQogICAgcHJpbnQoZiIiKQ0KICAgIHByaW50KGYiICAgICAgICAgIFx4MWJbOTdtW1wwMzNbMzc7NDFtICBMIEkgTSBJIFQgICBNIEUgTiBVICAgXDAzM1swO21dIikNCiAgICBwcmludChmIiIpDQogICAgbGltaXQgPSBpbnQoaW5wdXQoJyBFWEFNUExFOiAyMDAwLCAzMDAwLCA1MDAwMCwgMTAwMDAwXG5cbiBQVVQgQ0xPTklORyBMSU1JVDogJykpDQogICAgZm9yIG5tYnIgaW4gcmFuZ2UobGltaXQpOg0KICAgICAgICBubXAgPSAnJy5qb2luKHJhbmRvbS5jaG9pY2Uoc3RyaW5nLmRpZ2l0cykgZm9yIF8gaW4gcmFuZ2UoNykpDQogICAgICAgIHVzZXIuYXBwZW5kKG5tcCkNCiAgICB3aXRoIFRocmVhZFBvb2wobWF4X3dvcmtlcnM9MzApIGFzIG1hbnNoZXJhOiAgICANCiAgICAgICAgY2xlYXIoKQ0KICAgICAgICB0bCA9IHN0cihsZW4odXNlcikpDQogICAgICAgIHByaW50KGYiIHtXSElURX1UT1RBTCBJRFogICAgICAgICAgICAgOiB7QkxVRX0iK3RsKyIgfj4gWyBGQVNURVNUGl0iKQ0KICAgICAgICBwcmludChmIiB7V0hJVEV9Q09VTlRSWSBZT1UgQ0hPT1NFICAgIDoge0dSRUVOfVBBS0lTVEFOICIpDQogICAgICAgIHByaW50KGYiIHtXSElURX1OVU1CRVIgWU9VIFBVVCAgICAgICAgOiB7WUVMTE9XfSIrY29kZSkNCiAgICAgICAgcHJpbnQoZiIge1dISVRFfVRPREFZIERBVEUgJiBUSU1FICAgICA6e1JFRH0ge2hhfS97YnV9L3t0YX0ge09SQU5HRX1+PiB7R1JFRU59ICIrc3RyKGEpKyI6IitzdHIobHQoKVs0XSkrIiAiKyB0YWcrIiAiKQ0KICAgICAgICBwcmludChmIiB7V0hJVEV9VE8gU1RPUCBQUk9DRVNTIFBSRVNTIEN0cmwgKyBaICIpDQogICAgICAgIHByaW50KGYne1JFRH1fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fPT0nKQ0KICAgICAgICBmb3IgbG92ZSBpbiB1c2VyOg0KICAgICAgICAgICAgdWlkID0gY29kZStsb3ZlDQogICAgICAgICAgICBwd3ggPSBbbG92ZV0NCiAgICAgICAgICAgIG1hbnNoZXJhLnN1Ym1pdChmcmVlMSx1aWQscHd4LHRsKQ0KZGVmIGZyZWUxKHVpZCxwd3gsdGwpOg0KICAgIGdsb2JhbCBsb29wDQogICAgZ2xvYmFsIG9rDQogICAgZ2xvYmFsIGFnZW50cw0KICAgIHRyeToNCiAgICAgICAgZm9yIHBzIGluIHB3eDoNCiAgICAgICAgICAgIGJpID0gcmFuZG9tLmNob2ljZShbQV0pDQogICAgICAgICAgICBzZXNzaW9uID0gcmVxdWVzdHMuU2Vzc2lvbigpDQogICAgICAgICAgICBwcm8gPSByYW5kb20uY2hvaWNlKHVnZW4pDQogICAgICAgICAgICBmcmVlX2ZiID0gc2Vzc2lvbi5nZXQoJ2h0dHBzOi8vZnJlZS5mYWNlYm9vay5jb20nKS50ZXh0DQogICAgICAgICAgICBsb2dfZGF0YSA9IHsNCiAgICAgICAgICAgICAgICAibHNkIjpyZS5zZWFyY2goJ25hbWU9ImxzZCIgdmFsdWU9IiguKj8pIicsIHN0cihmcmVlX2ZiKSkuZ3JvdXAoMSksDQogICAgICAgICAgICAiamF6b2VzdCI6cmUuc2VhcmNoKCduYW1lPSJqYXpvZXN0IiB2YWx1ZT0iKC4qPykiJywgc3RyKGZyZWVfZmIpKS5ncm91cCgxKSwNCiAgICAgICAgICAgICJtX3RzIjpyZS5zZWFyY2goJ25hbWU9Im1fdHMiIHZhbHVlPSIoLio/KSInLCBzdHIoZnJlZV9mYikpLmdyb3VwKDEpLA0KICAgICAgICAgICAgImxpIjpyZS5zZWFyY2goJ25hbWU9ImxpIiB2YWx1ZT0iKC4qPykiJywgc3RyKGZyZWVfZmIpKS5ncm91cCgxKSwNCiAgICAgICAgICAgICJ0cnlfbnVtYmVyIjoiMCIsDQogICAgICAgICAgICAidW5yZWNvZ25pemVkX3RyaWVzIjoiMCIsDQogICAgICAgICAgICAiZW1haWwiOnVpZCwNCiAgICAgICAgICAgICJwYXNzIjpwcywNCiAgICAgICAgICAgICJsb2dpbiI6IkxvZyBJbiJ9DQogICAgICAgICAgICBoZWFkZXIgPSAoeyJhdXRob3JpdHkiOiAnZnJlZS5mYWNlYm9vay5jb20nLA0KICAgICAgICAgICAgIm1ldGhvZCI6ICdHRVQnLA0KICAgICAgICAgICAic2NoZW1lIjogJ2h0dHBzJywNCiAgICAgICAgICAgICJhY2NlcHQiOiAndGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKltpbnNlcnRlZCBieSBjeXRob24gdG8gYXZvaWQgY29tbWVudCBjbG9zZXJdL1tpbnNlcnRlZCBieSBjeXRob24gdG8gYXZvaWQgY29tbWVudCBzdGFydF0qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45JywNCiAgICAgICAgICAgICJhY2NlcHQtZW5jb2RpbmciOiAnZ3ppcCwgZGVmbGF0ZSwgYnInLA0KICAgICAgICAgICAgImFjY2VwdC1sYW5ndWFnZSI6ICdlbi1VUyxlbjtxPTAuOScsDQogICAgICAgICAgICAiY2FjaGUtY29udHJvbCI6ICduby1jYWNoZScsDQogICAgICAgICAgICAicHJhZ21hIjogJ25vLWNhY2hlJywNCiAgICAgICAgICAgICJyZWZlcmVyIjogJ2h0dHBzOi8vZnJlZS5mYWNlYm9vay5jb20vJywNCiAgICAgICAgICAgICJzZWMtY2gtdWEiOiAnIi5Ob3QvQSlCcmFuZCI7dj0iOTkiLCAiR29vZ2xlIENocm9tZSI7dj0iMTAzIiwgIkNocm9taXVtIjt2PSIxMDMiJywNCiAgICAgICAgICAgICJzZWMtY2gtdWEtbW9iaWxlIjogJz8wJywNCiAgICAgICAgICAgICJzZWMtY2gtdWEtcGxhdGZvcm0iOiciV2luZG93cyInLA0KICAgICAgICAgICAgInNlYy1mZXRjaC1kZXN0IjogJ21hbmlmZXN0JywNCiAgICAgICAgICAgICJzZWMtZmV0Y2gtbW9kZSI6ICdjb3JzJywNCiAgICAgICAgICAgICJzZWMtZmV0Y2gtc2l0ZSI6ICdzYW1lLW9yaWdpbicsDQogICAgICAgICAgICAidXNlci1hZ2VudCI6cHJvLH0pDQogICAgICAgICAgICBsbyA9IHNlc3Npb24ucG9zdCgnaHR0cHM6Ly9mcmVlLmZhY2Vib29rLmNvbS9sb2dpbi9kZXZpY2UtYmFzZWQvcmVndWxhci9sb2dpbi8/cmVmc3JjPWRlcHJlY2F0ZWQmbHd2PTEwMCZyZWZpZD04JyxkYXRhPWxvZ19kYXRhLGhlYWRlcnM9aGVhZGVyKS50ZXh0DQogICAgICAgICAgICBsb2dfY29va2llcz1zZXNzaW9uLmNvb2tpZXMuZ2V0X2RpY3QoKS5rZXlzKCkNCiAgICAgICAgICAgIGlmICdjX3VzZXInIGluIGxvZ19jb29raWVzOg0KICAgICAgICAgICAgICAgIGNva2k9IjsiLmpvaW4oW2tleSsiPSIrdmFsdWUgZm9yIGtleSx2YWx1ZSBpbiBzZXNzaW9uLmNvb2tpZXMuZ2V0X2RpY3QoKS5pdGVtcygpXSkNCiAgICAgICAgICAgICAgICB1aWQgPSBjb2tpWzc6MjJdDQogICAgICAgICAgICAgICAgb3Muc3lzdGVtKCJwbGF5LWF1ZGlvIFNBSkpBRF9PSy5tcDMiKQ0KICAgICAgICAgICAgICAgIHByaW50KCdcclwwMzNbMTszMm1bU0FKSkFELU9LXSAnK3VpZCsnIFsaXSAnK3BzKyAnJykNCiAgICAgICAgICAgICAgICBjZWtfYXBrKHNlc3Npb24sY29raSkNCiAgICAgICAgICAgICAgICBvcGVuKCcvc2RjYXJkL1NBSkpBRC1PSy50eHQnLCAnYScpLndyaXRlKHVpZCsnIHwgJytwcysnXG4nKQ0KICAgICAgICAgICAgICAgIG9rLmFwcGVuZCh1aWQpDQogICAgICAgICAgICBlbGlmICdjaGVja3BvaW50JyBpbiBsb2dfY29va2llczoNCiAgICAgICAgICAgICAgICBpZiAnRW50ZXIgbG9naW4gY29kZSB0byBjb250aW51ZScgaW4gbG9nX2Nvb2tpZXM6DQogICAgICAgICAgICAgICAgICAgIGNva2k9IjsiLmpvaW4oW2tleSsiPSIrdmFsdWUgZm9yIGtleSx2YWx1ZSBpbiBzZXNzaW9uLmNvb2tpZXMuZ2V0X2RpY3QoKS5pdGVtcygpXSkNCiAgICAgICAgICAgICAgICAgICAgdWlkPWNva2lbMjQ6MzldDQogICAgICAgICAgICAgICAgICAgIG9zLnN5c3RlbSgicGxheS1hdWRpbyBTQUpKQURfMkYubXAzIikNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoJ1xyXDAzM1sxOzM0bVtTQUpKQUQtMkZdICcrdWlkKycgW35dICcrcHMrJyAnKQ0KICAgICAgICAgICAgICAgICAgICBvcGVuKCcvc2RjYXJkL1NBSkpBRC0yRi50eHQnLCAnYScpLndyaXRlKHVpZCsnIHwgJytwcysnXG4nKQ0KICAgICAgICAgICAgICAgICAgICB0d2YuYXBwZW5kKHVpZCkNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBjb2tpPSI7Ii5qb2luKFtrZXkrIj0iK3ZhbHVlIGZvciBrZXksdmFsdWUgaW4gc2Vzc2lvbi5jb29raWVzLmdldF9kaWN0KCkuaXRlbXMoKV0pDQogICAgICAgICAgICAgICAgICAgIHVpZD1jb2tpWzI0OjM5XQ0KICAgICAgICAgICAgICAgICAgICBSZWQgPSAnXDAzM1sxOzMxbScNCiAgICAgICAgICAgICAgICAgICAgb3Muc3lzdGVtKCJwbGF5LWF1ZGlvIFNBSkpBRF9DUC5tcDMiKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChmJ1xyXDAzM1sxOzMwbVtTQUpKQUQtQ1BdICcrdWlkKycgW9ddICcrcHMrICcgJykNCiAgICAgICAgICAgICAgICAgICAgb3BlbignL3NkY2FyZC9TQUpKQUQtQ1AudHh0JywgJ2EnKS53cml0ZSh1aWQrJyB8ICcrcHMrJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgY3AuYXBwZW5kKHVpZCkNCiAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgbG9vcCs9MQ0KICAgICAgICBzeXMuc3Rkb3V0LndyaXRlKGYnXHJcMzNbMTszN21bU0FKSkFEIF0gWyVzXSBcMzNbMTs5N21bT0s6JXN7U0FKSkFEfUNQOiVzXSclKGxvb3AsbGVuKG9rKSxsZW4oY3ApKSksIA0KICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkNCiAgICAgICAgY2hlY2tzKG9rLGNwKQ0KICAgIGV4Y2VwdDoNCiAgICAgICAgcGFzcw0KIA0KIA0KIA0KIA0KIA0KIA0KIy0tLS0tLS0tLS0tLS0tLS0tLS0tLVtQQVNTIDIgQ0xPTklORyBNRU5VXS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMNCmRlZiBwYXNzd29yZDIoKToNCiAgICB1c2VyPVtdDQogICAgDQogICAgb3MuZ2V0dWlkDQogICAgb3MuZ2V0ZXVpZA0KICAgIG9zLnN5c3RlbSgiY2xlYXIiKQ0KICAgIHByaW50KGxvZ28pDQogICAgcHJpbnQoZiIiKQ0KICAgIGNsZWFyKCkNCiAgICBwcmludChmIiAgICAgICAgICBceDFiWzk3bVtcMDMzWzM3OzQxbSAgQyBPIEQgRSAgICBNIEUgTiBVICAgXDAzM1swO21dIikNCiAgICBwcmludChmIiIpDQogICAgbGluZXgoKQ0KICAgIHByaW50KGYiIikNCiAgICBwcmludChmIiAwMzA2ICwwMzAwICwwMzE1ICwwMzMzIikNCiAgICBwcmludChmIiAwMzQxICwwMzQyICwwMzQ1ICwwMzQ5IikNCiAgICBwcmludChmIiAwMzIxICwwMzE2ICwwMzA4ICwwMzA5IikNCiAgICBwcmludChmIiIpDQogICAgbGluZXgoKQ0KICAgIHByaW50KGYiXHgxYls5N21bXDAzM1szNzs0MW1CRVNUIENPREUgMDMwMCAvIDAzMDIgLyAwMzA2IC8gMDM0OSAvMDMxNSAgIFwwMzNbMDttXSIpDQogICAgcHJpbnQoIiIpDQogICAgbGluZXgoKQ0KICAgIGNvZGUgPSBpbnB1dCgnIFBVVCBDT0RFIDogJykNCiAgICBvcy5zeXN0ZW0oImNsZWFyIikNCiAgICBwcmludChsb2dvKQ0KICAgIHByaW50KGYiIikNCiAgICBwcmludChmIiAgICAgICAgICBceDFiWzk3bVtcMDMzWzM3OzQxbSAgTCBJIE0gSSBUICAgTSBFIE4gVSAgIFwwMzNbMDttXSIpDQogICAgcHJpbnQoZiIiKQ0KICAgIGxpbWl0ID0gaW50KGlucHV0KCcgRVhBTVBMRTogMjAwMCwgMzAwMCwgNTAwMDAsIDEwMDAwMFxuXG4gUFVUIENMT05JTkcgTElNSVQ6ICcpKQ0KICAgIGZvciBubWJyIGluIHJhbmdlKGxpbWl0KToNCiAgICAgICAgbm1wID0gJycuam9pbihyYW5kb20uY2hvaWNlKHN0cmluZy5kaWdpdHMpIGZvciBfIGluIHJhbmdlKDcpKQ0KICAgICAgICB1c2VyLmFwcGVuZChubXApDQogICAgd2l0aCBUaHJlYWRQb29sKG1heF93b3JrZXJzPTMwKSBhcyBtYW5zaGVyYTogICAgDQogICAgICAgIGNsZWFyKCkNCiAgICAgICAgdGwgPSBzdHIobGVuKHVzZXIpKQ0KICAgICAgICBwcmludChmIiB7V0hJVEV9VE9UQUwgSURaICAgICAgICAgICAgIDoge0JMVUV9Iit0bCsiIH4+IFsgRkFTVCBdIikNCiAgICAgICAgcHJpbnQoZiIge1dISVRFfUNPVU5UUlkgWU9VIENIT09TRSAgICA6IHtHUkVFTn1QQUtJU1RBTiAiKQ0KICAgICAgICBwcmludChmIiB7V0hJVEV9TlVNQkVSIFlPVSBQVVQgICAgICAgIDoge1lFTExPV30iK2NvZGUpDQogICAgICAgIHByaW50KGYiIHtXSElURX1UT0RBWSBEQVRFICYgVElNRSAgICAgOntSRUR9IHtoYX0ve2J1fS97dGF9IHtPUkFOR0V9fj4ge0dSRUVOfSAiK3N0cihhKSsiOiIrc3RyKGx0KClbNF0pKyIgIisgdGFnKyIgIikNCiAgICAgICAgcHJpbnQoZiIge1dISVRFfVRPIFNUT1AgUFJPQ0VTUyBQUkVTUyBDdHJsICsgWiAiKQ0KICAgICAgICBwcmludChmJ3tSRUR9X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXycpDQogICAgICAgIGZvciBsb3ZlIGluIHVzZXI6DQogICAgICAgICAgICB1aWQgPSBjb2RlK2xvdmUNCiAgICAgICAgICAgIHB3eCA9IFtsb3ZlLGNvZGUrbG92ZV0NCiAgICAgICAgICAgIG1hbnNoZXJhLnN1Ym1pdChmcmVlMix1aWQscHd4LHRsKQ0KZGVmIGZyZWUyKHVpZCxwd3gsdGwpOg0KICAgIGdsb2JhbCBsb29wDQogICAgZ2xvYmFsIG9rDQogICAgZ2xvYmFsIGFnZW50cw0KICAgIHRyeToNCiAgICAgICAgZm9yIHBzIGluIHB3eDoNCiAgICAgICAgICAgIGJpID0gcmFuZG9tLmNob2ljZShbQV0pDQogICAgICAgICAgICBzZXNzaW9uID0gcmVxdWVzdHMuU2Vzc2lvbigpDQogICAgICAgICAgICBwcm8gPSByYW5kb20uY2hvaWNlKHVnZW4pDQogICAgICAgICAgICBmcmVlX2ZiID0gc2Vzc2lvbi5nZXQoJ2h0dHBzOi8vZnJlZS5mYWNlYm9vay5jb20nKS50ZXh0DQogICAgICAgICAgICBsb2dfZGF0YSA9IHsNCiAgICAgICAgICAgICAgICAibHNkIjpyZS5zZWFyY2goJ25hbWU9ImxzZCIgdmFsdWU9IiguKj8pIicsIHN0cihmcmVlX2ZiKSkuZ3JvdXAoMSksDQogICAgICAgICAgICAiamF6b2VzdCI6cmUuc2VhcmNoKCduYW1lPSJqYXpvZXN0IiB2YWx1ZT0iKC4qPykiJywgc3RyKGZyZWVfZmIpKS5ncm91cCgxKSwNCiAgICAgICAgICAgICJtX3RzIjpyZS5zZWFyY2goJ25hbWU9Im1fdHMiIHZhbHVlPSIoLio/KSInLCBzdHIoZnJlZV9mYikpLmdyb3VwKDEpLA0KICAgICAgICAgICAgImxpIjpyZS5zZWFyY2goJ25hbWU9ImxpIiB2YWx1ZT0iKC4qPykiJywgc3RyKGZyZWVfZmIpKS5ncm91cCgxKSwNCiAgICAgICAgICAgICJ0cnlfbnVtYmVyIjoiMCIsDQogICAgICAgICAgICAidW5yZWNvZ25pemVkX3RyaWVzIjoiMCIsDQogICAgICAgICAgICAiZW1haWwiOnVpZCwNCiAgICAgICAgICAgICJwYXNzIjpwcywNCiAgICAgICAgICAgICJsb2dpbiI6IkxvZyBJbiJ9DQogICAgICAgICAgICBoZWFkZXIgPSAoeyJhdXRob3JpdHkiOiAnZnJlZS5mYWNlYm9vay5jb20nLA0KICAgICAgICAgICAgIm1ldGhvZCI6ICdHRVQnLA0KICAgICAgICAgICAic2NoZW1lIjogJ2h0dHBzJywNCiAgICAgICAgICAgICJhY2NlcHQiOiAndGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKltpbnNlcnRlZCBieSBjeXRob24gdG8gYXZvaWQgY29tbWVudCBjbG9zZXJdL1tpbnNlcnRlZCBieSBjeXRob24gdG8gYXZvaWQgY29tbWVudCBzdGFydF0qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45JywNCiAgICAgICAgICAgICJhY2NlcHQtZW5jb2RpbmciOiAnZ3ppcCwgZGVmbGF0ZSwgYnInLA0KICAgICAgICAgICAgImFjY2VwdC1sYW5ndWFnZSI6ICdlbi1VUyxlbjtxPTAuOScsDQogICAgICAgICAgICAiY2FjaGUtY29udHJvbCI6ICduby1jYWNoZScsDQogICAgICAgICAgICAicHJhZ21hIjogJ25vLWNhY2hlJywNCiAgICAgICAgICAgICJyZWZlcmVyIjogJ2h0dHBzOi8vZnJlZS5mYWNlYm9vay5jb20vJywNCiAgICAgICAgICAgICJzZWMtY2gtdWEiOiAnIi5Ob3QvQSlCcmFuZCI7dj0iOTkiLCAiR29vZ2xlIENocm9tZSI7dj0iMTAzIiwgIkNocm9taXVtIjt2PSIxMDMiJywNCiAgICAgICAgICAgICJzZWMtY2gtdWEtbW9iaWxlIjogJz8wJywNCiAgICAgICAgICAgICJzZWMtY2gtdWEtcGxhdGZvcm0iOiciV2luZG93cyInLA0KICAgICAgICAgICAgInNlYy1mZXRjaC1kZXN0IjogJ21hbmlmZXN0JywNCiAgICAgICAgICAgICJzZWMtZmV0Y2gtbW9kZSI6ICdjb3JzJywNCiAgICAgICAgICAgICJzZWMtZmV0Y2gtc2l0ZSI6ICdzYW1lLW9yaWdpbicsDQogICAgICAgICAgICAidXNlci1hZ2VudCI6cHJvLH0pDQogICAgICAgICAgICBsbyA9IHNlc3Npb24ucG9zdCgnaHR0cHM6Ly9mcmVlLmZhY2Vib29rLmNvbS9sb2dpbi9kZXZpY2UtYmFzZWQvcmVndWxhci9sb2dpbi8/cmVmc3JjPWRlcHJlY2F0ZWQmbHd2PTEwMCZyZWZpZD04JyxkYXRhPWxvZ19kYXRhLGhlYWRlcnM9aGVhZGVyKS50ZXh0DQogICAgICAgICAgICBsb2dfY29va2llcz1zZXNzaW9uLmNvb2tpZXMuZ2V0X2RpY3QoKS5rZXlzKCkNCiAgICAgICAgICAgIGlmICdjX3VzZXInIGluIGxvZ19jb29raWVzOg0KICAgICAgICAgICAgICAgIGNva2k9IjsiLmpvaW4oW2tleSsiPSIrdmFsdWUgZm9yIGtleSx2YWx1ZSBpbiBzZXNzaW9uLmNvb2tpZXMuZ2V0X2RpY3QoKS5pdGVtcygpXSkNCiAgICAgICAgICAgICAgICB1aWQgPSBjb2tpWzc6MjJdDQogICAgICAgICAgICAgICAgb3Muc3lzdGVtKCJwbGF5LWF1ZGlvIFNBSkpBRF9PSy5tcDMiKQ0KICAgICAgICAgICAgICAgIHByaW50KCdcclwwMzNbMTszMm1bU0FKSkFELU9LXSAnK3VpZCsnIFsaXSAnK3BzKyAnJykNCiAgICAgICAgICAgICAgICBjZWtfYXBrKHNlc3Npb24sY29raSkNCiAgICAgICAgICAgICAgICBvcGVuKCcvc2RjYXJkL1NBSkpBRC1PSy50eHQnLCAnYScpLndyaXRlKHVpZCsnIHwgJytwcysnXG4nKQ0KICAgICAgICAgICAgICAgIG9rLmFwcGVuZCh1aWQpDQogICAgICAgICAgICBlbGlmICdjaGVja3BvaW50JyBpbiBsb2dfY29va2llczoNCiAgICAgICAgICAgICAgICBpZiAnRW50ZXIgbG9naW4gY29kZSB0byBjb250aW51ZScgaW4gbG9nX2Nvb2tpZXM6DQogICAgICAgICAgICAgICAgICAgIGNva2k9IjsiLmpvaW4oW2tleSsiPSIrdmFsdWUgZm9yIGtleSx2YWx1ZSBpbiBzZXNzaW9uLmNvb2tpZXMuZ2V0X2RpY3QoKS5pdGVtcygpXSkNCiAgICAgICAgICAgICAgICAgICAgdWlkPWNva2lbMjQ6MzldDQogICAgICAgICAgICAgICAgICAgIG9zLnN5c3RlbSgicGxheS1hdWRpbyBTQUpKQURfMkYubXAzIikNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoJ1xyXDAzM1sxOzM0bVtTQUpKQUQtMkZdICcrdWlkKycgW35dICcrcHMrJyAnKQ0KICAgICAgICAgICAgICAgICAgICBvcGVuKCcvc2RjYXJkL1NBSkpBRC0yRi50eHQnLCAnYScpLndyaXRlKHVpZCsnIHwgJytwcysnXG4nKQ0KICAgICAgICAgICAgICAgICAgICB0d2YuYXBwZW5kKHVpZCkNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBjb2tpPSI7Ii5qb2luKFtrZXkrIj0iK3ZhbHVlIGZvciBrZXksdmFsdWUgaW4gc2Vzc2lvbi5jb29raWVzLmdldF9kaWN0KCkuaXRlbXMoKV0pDQogICAgICAgICAgICAgICAgICAgIHVpZD1jb2tpWzI0OjM5XQ0KICAgICAgICAgICAgICAgICAgICBSZWQgPSAnXDAzM1sxOzMxbScNCiAgICAgICAgICAgICAgICAgICAgb3Muc3lzdGVtKCJwbGF5LWF1ZGlvIFNBSkpBRF9DUC5tcDMiKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChmJ1xyXDAzM1sxOzMwbVtTQUpKQUQtQ1BdICcrdWlkKycgW9ddICcrcHMrICcgJykNCiAgICAgICAgICAgICAgICAgICAgb3BlbignL3NkY2FyZC9TQUpKQUQtQ1AudHh0JywgJ2EnKS53cml0ZSh1aWQrJyB8ICcrcHMrJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgY3AuYXBwZW5kKHVpZCkNCiAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgbG9vcCs9MQ0KICAgICAgICBzeXMuc3Rkb3V0LndyaXRlKGYnXHJcMzNbMTszN21bU0FKSkFEIF0gWyVzXSBcMzNbMTs5N21bT0s6JXN7U0FKSkFEfUNQOiVzXSclKGxvb3AsbGVuKG9rKSxsZW4oY3ApKSksIA0KICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkNCiAgICAgICAgY2hlY2tzKG9rLGNwKQ0KICAgIGV4Y2VwdDoNCiAgICAgICAgcGFzcw0KIy0tLS0tLS0tLS0tLS0tLS0tLS0tLVtQQVNTIDUgQ0xPTklORyBNRU5VXS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMNCmRlZiBwYXNzd29yZDUoKToNCiAgICB1c2VyPVtdDQogICAgDQogICAgb3MuZ2V0dWlkDQogICAgb3MuZ2V0ZXVpZA0KICAgIG9zLnN5c3RlbSgiY2xlYXIiKQ0KICAgIHByaW50KGxvZ28pDQogICAgcHJpbnQoZiIiKQ0KICAgIGNsZWFyKCkNCiAgICBwcmludChmIiAgICAgICAgICBceDFiWzk3bVtcMDMzWzM3OzQxbSAgQyBPIEQgRSAgICBNIEUgTiBVICAgXDAzM1swO21dIikNCiAgICBwcmludChmIiIpDQogICAgbGluZXgoKQ0KICAgIHByaW50KGYiIikNCiAgICBwcmludChmIiAwMzA2ICwwMzAwICwwMzE1ICwwMzMzIikNCiAgICBwcmludChmIiAwMzQxICwwMzQyICwwMzQ1ICwwMzQ5IikNCiAgICBwcmludChmIiAwMzIxICwwMzE2ICwwMzA4ICwwMzA5IikNCiAgICBwcmludChmIiIpDQogICAgbGluZXgoKQ0KICAgIHByaW50KGYiXHgxYls5N21bXDAzM1szNzs0MW1CRVNUIENPREUgMDMwMCAvIDAzMDIgLyAwMzA2IC8gMDM0OSAvMDMxNSAgIFwwMzNbMDttXSIpDQogICAgcHJpbnQoIiIpDQogICAgbGluZXgoKQ0KICAgIGNvZGUgPSBpbnB1dCgnIFBVVCBDT0RFIDogJykNCiAgICBvcy5zeXN0ZW0oImNsZWFyIikNCiAgICBwcmludChsb2dvKQ0KICAgIHByaW50KGYiIikNCiAgICBwcmludChmIiAgICAgICAgICBceDFiWzk3bVtcMDMzWzM3OzQxbSAgTCBJIE0gSSBUICAgTSBFIE4gVSAgIFwwMzNbMDttXSIpDQogICAgcHJpbnQoZiIiKQ0KICAgIGxpbWl0ID0gaW50KGlucHV0KCcgRVhBTVBMRTogMjAwMCwgMzAwMCwgNTAwMDAsIDEwMDAwMFxuXG4gUFVUIENMT05JTkcgTElNSVQ6ICcpKQ0KICAgIGZvciBubWJyIGluIHJhbmdlKGxpbWl0KToNCiAgICAgICAgbm1wID0gJycuam9pbihyYW5kb20uY2hvaWNlKHN0cmluZy5kaWdpdHMpIGZvciBfIGluIHJhbmdlKDcpKQ0KICAgICAgICB1c2VyLmFwcGVuZChubXApDQogICAgd2l0aCBUaHJlYWRQb29sKG1heF93b3JrZXJzPTMwKSBhcyBtYW5zaGVyYTogICAgDQogICAgICAgIGNsZWFyKCkNCiAgICAgICAgdGwgPSBzdHIobGVuKHVzZXIpKQ0KICAgICAgICBwcmludChmIiB7V0hJVEV9VE9UQUwgSURaICAgICAgICAgICAgIDoge0JMVUV9Iit0bCsiIH4+IFsgU0xPVyAaXSIpDQogICAgICAgIHByaW50KGYiIHtXSElURX1DT1VOVFJZIFlPVSBDSE9PU0UgICAgOiB7R1JFRU59UEFLSVNUQU4gIikNCiAgICAgICAgcHJpbnQoZiIge1dISVRFfU5VTUJFUiBZT1UgUFVUICAgICAgICA6IHtZRUxMT1d9Iitjb2RlKQ0KICAgICAgICBwcmludChmIiB7V0hJVEV9VE9EQVkgREFURSAmIFRJTUUgICAgIDp7UkVEfSB7aGF9L3tidX0ve3RhfSB7T1JBTkdFfX4+IHtHUkVFTn0gIitzdHIoYSkrIjoiK3N0cihsdCgpWzRdKSsiICIrIHRhZysiICIpDQogICAgICAgIHByaW50KGYiIHtXSElURX1UTyBTVE9QIFBST0NFU1MgUFJFU1MgQ3RybCArIFogIikNCiAgICAgICAgcHJpbnQoZid7UkVEfV9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18nKQ0KICAgICAgICBmb3IgbG92ZSBpbiB1c2VyOg0KICAgICAgICAgICAgdWlkID0gY29kZStsb3ZlDQogICAgICAgICAgICBwd3ggPSBbbG92ZSxjb2RlK2xvdmUsJzc4Njc4NicsJzEyMzQ1NicsJ3Bha2lzdGFuJ10NCiAgICAgICAgICAgIG1hbnNoZXJhLnN1Ym1pdChmcmVlLHVpZCxwd3gsdGwpDQpkZWYgZnJlZSh1aWQscHd4LHRsKToNCiAgICBnbG9iYWwgbG9vcA0KICAgIGdsb2JhbCBvaw0KICAgIGdsb2JhbCBhZ2VudHMNCiAgICB0cnk6DQogICAgICAgIGZvciBwcyBpbiBwd3g6DQogICAgICAgICAgICBiaSA9IHJhbmRvbS5jaG9pY2UoW0FdKQ0KICAgICAgICAgICAgc2Vzc2lvbiA9IHJlcXVlc3RzLlNlc3Npb24oKQ0KICAgICAgICAgICAgcHJvID0gcmFuZG9tLmNob2ljZSh1Z2VuKQ0KICAgICAgICAgICAgZnJlZV9mYiA9IHNlc3Npb24uZ2V0KCdodHRwczovL2ZyZWUuZmFjZWJvb2suY29tJykudGV4dA0KICAgICAgICAgICAgbG9nX2RhdGEgPSB7DQogICAgICAgICAgICAgICAgImxzZCI6cmUuc2VhcmNoKCduYW1lPSJsc2QiIHZhbHVlPSIoLio/KSInLCBzdHIoZnJlZV9mYikpLmdyb3VwKDEpLA0KICAgICAgICAgICAgImphem9lc3QiOnJlLnNlYXJjaCgnbmFtZT0iamF6b2VzdCIgdmFsdWU9IiguKj8pIicsIHN0cihmcmVlX2ZiKSkuZ3JvdXAoMSksDQogICAgICAgICAgICAibV90cyI6cmUuc2VhcmNoKCduYW1lPSJtX3RzIiB2YWx1ZT0iKC4qPykiJywgc3RyKGZyZWVfZmIpKS5ncm91cCgxKSwNCiAgICAgICAgICAgICJsaSI6cmUuc2VhcmNoKCduYW1lPSJsaSIgdmFsdWU9IiguKj8pIicsIHN0cihmcmVlX2ZiKSkuZ3JvdXAoMSksDQogICAgICAgICAgICAidHJ5X251bWJlciI6IjAiLA0KICAgICAgICAgICAgInVucmVjb2duaXplZF90cmllcyI6IjAiLA0KICAgICAgICAgICAgImVtYWlsIjp1aWQsDQogICAgICAgICAgICAicGFzcyI6cHMsDQogICAgICAgICAgICAibG9naW4iOiJMb2cgSW4ifQ0KICAgICAgICAgICAgaGVhZGVyID0gKHsiYXV0aG9yaXR5IjogJ2ZyZWUuZmFjZWJvb2suY29tJywNCiAgICAgICAgICAgICJtZXRob2QiOiAnR0VUJywNCiAgICAgICAgICAgInNjaGVtZSI6ICdodHRwcycsDQogICAgICAgICAgICAiYWNjZXB0IjogJ3RleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCpbaW5zZXJ0ZWQgYnkgY3l0aG9uIHRvIGF2b2lkIGNvbW1lbnQgY2xvc2VyXS9baW5zZXJ0ZWQgYnkgY3l0aG9uIHRvIGF2b2lkIGNvbW1lbnQgc3RhcnRdKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOScsDQogICAgICAgICAgICAiYWNjZXB0LWVuY29kaW5nIjogJ2d6aXAsIGRlZmxhdGUsIGJyJywNCiAgICAgICAgICAgICJhY2NlcHQtbGFuZ3VhZ2UiOiAnZW4tVVMsZW47cT0wLjknLA0KICAgICAgICAgICAgImNhY2hlLWNvbnRyb2wiOiAnbm8tY2FjaGUnLA0KICAgICAgICAgICAgInByYWdtYSI6ICduby1jYWNoZScsDQogICAgICAgICAgICAicmVmZXJlciI6ICdodHRwczovL2ZyZWUuZmFjZWJvb2suY29tLycsDQogICAgICAgICAgICAic2VjLWNoLXVhIjogJyIuTm90L0EpQnJhbmQiO3Y9Ijk5IiwgIkdvb2dsZSBDaHJvbWUiO3Y9IjEwMyIsICJDaHJvbWl1bSI7dj0iMTAzIicsDQogICAgICAgICAgICAic2VjLWNoLXVhLW1vYmlsZSI6ICc/MCcsDQogICAgICAgICAgICAic2VjLWNoLXVhLXBsYXRmb3JtIjonIldpbmRvd3MiJywNCiAgICAgICAgICAgICJzZWMtZmV0Y2gtZGVzdCI6ICdtYW5pZmVzdCcsDQogICAgICAgICAgICAic2VjLWZldGNoLW1vZGUiOiAnY29ycycsDQogICAgICAgICAgICAic2VjLWZldGNoLXNpdGUiOiAnc2FtZS1vcmlnaW4nLA0KICAgICAgICAgICAgInVzZXItYWdlbnQiOnBybyx9KQ0KICAgICAgICAgICAgbG8gPSBzZXNzaW9uLnBvc3QoJ2h0dHBzOi8vZnJlZS5mYWNlYm9vay5jb20vbG9naW4vZGV2aWNlLWJhc2VkL3JlZ3VsYXIvbG9naW4vP3JlZnNyYz1kZXByZWNhdGVkJmx3dj0xMDAmcmVmaWQ9OCcsZGF0YT1sb2dfZGF0YSxoZWFkZXJzPWhlYWRlcikudGV4dA0KICAgICAgICAgICAgbG9nX2Nvb2tpZXM9c2Vzc2lvbi5jb29raWVzLmdldF9kaWN0KCkua2V5cygpDQogICAgICAgICAgICBpZiAnY191c2VyJyBpbiBsb2dfY29va2llczoNCiAgICAgICAgICAgICAgICBjb2tpPSI7Ii5qb2luKFtrZXkrIj0iK3ZhbHVlIGZvciBrZXksdmFsdWUgaW4gc2Vzc2lvbi5jb29raWVzLmdldF9kaWN0KCkuaXRlbXMoKV0pDQogICAgICAgICAgICAgICAgdWlkID0gY29raVs3OjIyXQ0KICAgICAgICAgICAgICAgIG9zLnN5c3RlbSgicGxheS1hdWRpbyBTQUpKQURfT0subXAzIikNCiAgICAgICAgICAgICAgICBwcmludCgnXHJcMDMzWzE7MzJtW1NBSkpBRC1PS10gJyt1aWQrJyBbGl0gJytwcysgJycpDQogICAgICAgICAgICAgICAgY2VrX2FwayhzZXNzaW9uLGNva2kpDQogICAgICAgICAgICAgICAgb3BlbignL3NkY2FyZC9TQUpKQUQtT0sudHh0JywgJ2EnKS53cml0ZSh1aWQrJyB8ICcrcHMrJ1xuJykNCiAgICAgICAgICAgICAgICBvay5hcHBlbmQodWlkKQ0KICAgICAgICAgICAgZWxpZiAnY2hlY2twb2ludCcgaW4gbG9nX2Nvb2tpZXM6DQogICAgICAgICAgICAgICAgaWYgJ0VudGVyIGxvZ2luIGNvZGUgdG8gY29udGludWUnIGluIGxvZ19jb29raWVzOg0KICAgICAgICAgICAgICAgICAgICBjb2tpPSI7Ii5qb2luKFtrZXkrIj0iK3ZhbHVlIGZvciBrZXksdmFsdWUgaW4gc2Vzc2lvbi5jb29raWVzLmdldF9kaWN0KCkuaXRlbXMoKV0pDQogICAgICAgICAgICAgICAgICAgIHVpZD1jb2tpWzI0OjM5XQ0KICAgICAgICAgICAgICAgICAgICBvcy5zeXN0ZW0oInBsYXktYXVkaW8gU0FKSkFEXzJGLm1wMyIpDQogICAgICAgICAgICAgICAgICAgIHByaW50KCdcclwwMzNbMTszNG1bU0FKSkFELTJGXSAnK3VpZCsnIFt+XSAnK3BzKycgJykNCiAgICAgICAgICAgICAgICAgICAgb3BlbignL3NkY2FyZC9TQUpKQUQtMkYudHh0JywgJ2EnKS53cml0ZSh1aWQrJyB8ICcrcHMrJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgdHdmLmFwcGVuZCh1aWQpDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgY29raT0iOyIuam9pbihba2V5KyI9Iit2YWx1ZSBmb3Iga2V5LHZhbHVlIGluIHNlc3Npb24uY29va2llcy5nZXRfZGljdCgpLml0ZW1zKCldKQ0KICAgICAgICAgICAgICAgICAgICB1aWQ9Y29raVsyNDozOV0NCiAgICAgICAgICAgICAgICAgICAgUmVkID0gJ1wwMzNbMTszMW0nDQogICAgICAgICAgICAgICAgICAgIG9zLnN5c3RlbSgicGxheS1hdWRpbyBTQUpKQURfQ1AubXAzIikNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoZidcclwwMzNbMTszMG1bU0FKSkFELUNQXSAnK3VpZCsnIFvXXSAnK3BzKyAnICcpDQogICAgICAgICAgICAgICAgICAgIG9wZW4oJy9zZGNhcmQvU0FKSkFELUNQLnR4dCcsICdhJykud3JpdGUodWlkKycgfCAnK3BzKydcbicpDQogICAgICAgICAgICAgICAgICAgIGNwLmFwcGVuZCh1aWQpDQogICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgIGxvb3ArPTENCiAgICAgICAgc3lzLnN0ZG91dC53cml0ZShmJ1xyXDMzWzE7MzdtW1NBSkpBRCBdIFslc10gXDMzWzE7OTdtW09LOiVze1NBSkpBRH1DUDolc10nJShsb29wLGxlbihvayksbGVuKGNwKSkpLCANCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpDQogICAgICAgIGNoZWNrcyhvayxjcCkNCiAgICBleGNlcHQ6DQogICAgICAgIHBhc3MNCiMtLS0tLS0tLS0tLS0tLS0tLS0tLS1bTUFJTiBDTE9OSU5HIERFRiAyXS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMNCiANCiANCmRlZiBUYWJpaTIoKToNCiAgICB1c2VyPVtdDQogICAgDQogICAgb3MuZ2V0dWlkDQogICAgb3MuZ2V0ZXVpZA0KICAgIGNsZWFyKCkNCiAgICBwcmludChmIiAgICAgICAgICBceDFiWzk3bVtcMDMzWzM3OzQxbSAgQyBPIEQgRSAgICBNIEUgTiBVICAgXDAzM1swO21dIikNCiAgICBwcmludChmIiIpDQogICAgbGluZXgoKQ0KICAgIHByaW50KGYiIikNCiAgICBwcmludCgnIDg4MDE3MSAsIDg4MDE3MiAsIDg4MDE3MyBcbiA4ODAxNzQgLCA4ODAxOTEgLCA4ODAxOTJcbiA4ODAxOTMgLCA4ODAxOTQgLCA4ODAxODFcbiA4ODAxODIgLCA4ODAxODMgLCA4ODAxODRcbiA4ODAxNjEgLCA4ODAxNjIgLCA4ODAxNjMgJykNCiAgICBwcmludChmIiIpDQogICAgbGluZXgoKQ0KICAgIGNvZGUgPSBpbnB1dCgnIFBVVCBDT0RFIDogJykNCiAgICBvcy5zeXN0ZW0oImNsZWFyIikNCiAgICBwcmludChsb2dvKQ0KICAgIHByaW50KGYiIikNCiAgICBwcmludChmIiAgICAgICAgICBceDFiWzk3bVtcMDMzWzM3OzQxbSAgTCBJIE0gSSBUICAgTSBFIE4gVSAgIFwwMzNbMDttXSIpDQogICAgcHJpbnQoZiIiKQ0KICAgIGxpbWl0ID0gaW50KGlucHV0KCcgRVhBTVBMRTogMTAwMCwgMjAwMCwgNTAwMCwgMTAwMDBcblxuIFBVVCBDTE9OSU5HIExJTUlUOiAnKSkNCiAgICBmb3Igbm1iciBpbiByYW5nZShsaW1pdCk6DQogICAgICAgIG5tcCA9ICcnLmpvaW4ocmFuZG9tLmNob2ljZShzdHJpbmcuZGlnaXRzKSBmb3IgXyBpbiByYW5nZSg3KSkNCiAgICAgICAgdXNlci5hcHBlbmQobm1wKQ0KICAgIHdpdGggVGhyZWFkUG9vbChtYXhfd29ya2Vycz0zMCkgYXMgbWFuc2hlcmE6ICAgIA0KICAgICAgICBjbGVhcigpDQogICAgICAgIHRsID0gc3RyKGxlbih1c2VyKSkNCiAgICAgICAgcHJpbnQoZiJcbiB7V0hJVEV9VE9UQUwgSURaICAgICAgICAgICAgIDoge0J9Iit0bCkNCiAgICAgICAgcHJpbnQoZiIge1dISVRFfUNPVU5UUlkgWU9VIENIT09TRSAgICA6IHtCfUJBTkdMQURFU0ggIikNCiAgICAgICAgcHJpbnQoZiIge1dISVRFfU5VTUJFUiBZT1UgUFVUICAgICAgICA6IHtCfSIrY29kZSkNCiAgICAgICAgcHJpbnQoZiIge1dISVRFfVBST0NFU1MgSEFTIEJFRU4gU1RBUlRFRCIpDQogICAgICAgIHByaW50KGYiIHtXSElURX1CRSBQQVRJRU5ULi4uLi4uLiIpDQogICAgICAgIHByaW50KGYiIHtXSElURX1UTyBTVE9QIFBST0NFU1MgQ3RybCArIFogIikNCiAgICAgICAgcHJpbnQoZid7UkVEfV9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18nKQ0KICAgICAgICBmb3IgbG92ZSBpbiB1c2VyOg0KICAgICAgICAgICAgdWlkID0gY29kZStsb3ZlDQogICAgICAgICAgICBwd3ggPSBbbG92ZSwnNzg2Nzg2JywnMTIzNDU2J10NCiAgICAgICAgICAgIG1hbnNoZXJhLnN1Ym1pdChtLHVpZCxwd3gsdGwpDQpkZWYgbSh1aWQscHd4LHRsKToNCiAgICBnbG9iYWwgbG9vcA0KICAgIGdsb2JhbCBvaw0KICAgIGdsb2JhbCBhZ2VudHMNCiAgICB0cnk6DQogICAgICAgIGZvciBwcyBpbiBwd3g6DQogICAgICAgICAgICBiaSA9IHJhbmRvbS5jaG9pY2UoW0FdKQ0KICAgICAgICAgICAgc2Vzc2lvbiA9IHJlcXVlc3RzLlNlc3Npb24oKQ0KICAgICAgICAgICAgcHJvID0gcmFuZG9tLmNob2ljZSh1Z2VuKQ0KICAgICAgICAgICAgcHJvID0gcmFuZG9tLmNob2ljZSh1Z2VuKQ0KICAgICAgICAgICAgZnJlZV9mYiA9IHNlc3Npb24uZ2V0KCdodHRwczovL2ZyZWUuZmFjZWJvb2suY29tJykudGV4dA0KICAgICAgICAgICAgbG9nX2RhdGEgPSB7DQogICAgICAgICAgICAgICAgImxzZCI6cmUuc2VhcmNoKCduYW1lPSJsc2QiIHZhbHVlPSIoLio/KSInLCBzdHIoZnJlZV9mYikpLmdyb3VwKDEpLA0KICAgICAgICAgICAgImphem9lc3QiOnJlLnNlYXJjaCgnbmFtZT0iamF6b2VzdCIgdmFsdWU9IiguKj8pIicsIHN0cihmcmVlX2ZiKSkuZ3JvdXAoMSksDQogICAgICAgICAgICAibV90cyI6cmUuc2VhcmNoKCduYW1lPSJtX3RzIiB2YWx1ZT0iKC4qPykiJywgc3RyKGZyZWVfZmIpKS5ncm91cCgxKSwNCiAgICAgICAgICAgICJsaSI6cmUuc2VhcmNoKCduYW1lPSJsaSIgdmFsdWU9IiguKj8pIicsIHN0cihmcmVlX2ZiKSkuZ3JvdXAoMSksDQogICAgICAgICAgICAidHJ5X251bWJlciI6IjAiLA0KICAgICAgICAgICAgInVucmVjb2duaXplZF90cmllcyI6IjAiLA0KICAgICAgICAgICAgImVtYWlsIjp1aWQsDQogICAgICAgICAgICAicGFzcyI6cHMsDQogICAgICAgICAgICAibG9naW4iOiJMb2cgSW4ifQ0KICAgICAgICAgICAgaGVhZGVyID0gKHsiYXV0aG9yaXR5IjogJ2ZyZWUuZmFjZWJvb2suY29tJywNCiAgICAgICAgICAgICJtZXRob2QiOiAnR0VUJywNCiAgICAgICAgICAgICJzY2hlbWUiOiAnaHR0cHMnLA0KICAgICAgICAgICAgImFjY2VwdCI6ICd0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS9hdmlmLGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqW2luc2VydGVkIGJ5IGN5dGhvbiB0byBhdm9pZCBjb21tZW50IGNsb3Nlcl0vW2luc2VydGVkIGJ5IGN5dGhvbiB0byBhdm9pZCBjb21tZW50IHN0YXJ0XSo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjknLA0KICAgICAgICAgICAgImFjY2VwdC1lbmNvZGluZyI6ICdnemlwLCBkZWZsYXRlLCBicicsDQogICAgICAgICAgICAiYWNjZXB0LWxhbmd1YWdlIjogJ2VuLVVTLGVuO3E9MC45JywNCiAgICAgICAgICAgICJjYWNoZS1jb250cm9sIjogJ25vLWNhY2hlJywNCiAgICAgICAgICAgICJwcmFnbWEiOiAnbm8tY2FjaGUnLA0KICAgICAgICAgICAgInJlZmVyZXIiOiAnaHR0cHM6Ly9mcmVlLmZhY2Vib29rLmNvbS8nLA0KICAgICAgICAgICAgInNlYy1jaC11YSI6ICciLk5vdC9BKUJyYW5kIjt2PSI5OSIsICJHb29nbGUgQ2hyb21lIjt2PSIxMDMiLCAiQ2hyb21pdW0iO3Y9IjEwMyInLA0KICAgICAgICAgICAgInNlYy1jaC11YS1tb2JpbGUiOiAnPzAnLA0KICAgICAgICAgICAgInNlYy1jaC11YS1wbGF0Zm9ybSI6JyJXaW5kb3dzIicsDQogICAgICAgICAgICAic2VjLWZldGNoLWRlc3QiOiAnbWFuaWZlc3QnLA0KICAgICAgICAgICAgInNlYy1mZXRjaC1tb2RlIjogJ2NvcnMnLA0KICAgICAgICAgICAgInNlYy1mZXRjaC1zaXRlIjogJ3NhbWUtb3JpZ2luJywNCiAgICAgICAgICAgICJ1c2VyLWFnZW50Ijpwcm8sfSkNCiAgICAgICAgICAgIGxvID0gc2Vzc2lvbi5wb3N0KCdodHRwczovL2ZyZWUuZmFjZWJvb2suY29tL2xvZ2luL2RldmljZS1iYXNlZC9yZWd1bGFyL2xvZ2luLz9yZWZzcmM9ZGVwcmVjYXRlZCZsd3Y9MTAwJnJlZmlkPTgnLGRhdGE9bG9nX2RhdGEsaGVhZGVycz1oZWFkZXIpLnRleHQNCiAgICAgICAgICAgIGxvZ19jb29raWVzPXNlc3Npb24uY29va2llcy5nZXRfZGljdCgpLmtleXMoKQ0KICAgICAgICAgICAgaWYgJ2NfdXNlcicgaW4gbG9nX2Nvb2tpZXM6DQogICAgICAgICAgICAgICAgY29raT0iOyIuam9pbihba2V5KyI9Iit2YWx1ZSBmb3Iga2V5LHZhbHVlIGluIHNlc3Npb24uY29va2llcy5nZXRfZGljdCgpLml0ZW1zKCldKQ0KICAgICAgICAgICAgICAgIHVpZCA9IGNva2lbNzoyMl0NCiAgICAgICAgICAgICAgICBvcy5zeXN0ZW0oInBsYXktYXVkaW8gU0FKSkFEX09LLm1wMyIpDQogICAgICAgICAgICAgICAgcHJpbnQoJ1xyXDAzM1sxOzMybVtTQUpKQUQtT0tdICcrdWlkKycgWxpdICcrcHMrICcnKQ0KICAgICAgICAgICAgICAgIGNla19hcGsoc2Vzc2lvbixjb2tpKQ0KICAgICAgICAgICAgICAgIG9wZW4oJy9zZGNhcmQvU0FKSkFELU9LLnR4dCcsICdhJykud3JpdGUodWlkKycgfCAnK3BzKydcbicpDQogICAgICAgICAgICAgICAgb2suYXBwZW5kKHVpZCkNCiAgICAgICAgICAgIGVsaWYgJ2NoZWNrcG9pbnQnIGluIGxvZ19jb29raWVzOg0KICAgICAgICAgICAgICAgIGlmICdFbnRlciBsb2dpbiBjb2RlIHRvIGNvbnRpbnVlJyBpbiBsb2dfY29va2llczoNCiAgICAgICAgICAgICAgICAgICAgY29raT0iOyIuam9pbihba2V5KyI9Iit2YWx1ZSBmb3Iga2V5LHZhbHVlIGluIHNlc3Npb24uY29va2llcy5nZXRfZGljdCgpLml0ZW1zKCldKQ0KICAgICAgICAgICAgICAgICAgICB1aWQ9Y29raVsyNDozOV0NCiAgICAgICAgICAgICAgICAgICAgb3Muc3lzdGVtKCJwbGF5LWF1ZGlvIFNBSkpBRF8yRi5tcDMiKQ0KICAgICAgICAgICAgICAgICAgICBwcmludCgnXHJcMDMzWzE7MzRtW1NBSkpBRC0yRl0gJyt1aWQrJyBbfl0gJytwcysnICcpDQogICAgICAgICAgICAgICAgICAgIG9wZW4oJy9zZGNhcmQvU0FKSkFELTJGLnR4dCcsICdhJykud3JpdGUodWlkKycgfCAnK3BzKydcbicpDQogICAgICAgICAgICAgICAgICAgIHR3Zi5hcHBlbmQodWlkKQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIGNva2k9IjsiLmpvaW4oW2tleSsiPSIrdmFsdWUgZm9yIGtleSx2YWx1ZSBpbiBzZXNzaW9uLmNvb2tpZXMuZ2V0X2RpY3QoKS5pdGVtcygpXSkNCiAgICAgICAgICAgICAgICAgICAgdWlkPWNva2lbMjQ6MzldDQogICAgICAgICAgICAgICAgICAgIFJlZCA9ICdcMDMzWzE7MzFtJw0KICAgICAgICAgICAgICAgICAgICBvcy5zeXN0ZW0oInBsYXktYXVkaW8gU0FKSkFEX0NQLm1wMyIpDQogICAgICAgICAgICAgICAgICAgIHByaW50KGYnXHJcMDMzWzE7MzBtW1NBSkpBRC1DUF0gJyt1aWQrJyBb110gJytwcysgJyAnKQ0KICAgICAgICAgICAgICAgICAgICBvcGVuKCcvc2RjYXJkL1NBSkpBRC1DUC50eHQnLCAnYScpLndyaXRlKHVpZCsnIHwgJytwcysnXG4nKQ0KICAgICAgICAgICAgICAgICAgICBjcC5hcHBlbmQodWlkKQ0KICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICBsb29wKz0xDQogICAgICAgIHN5cy5zdGRvdXQud3JpdGUoZidcclwzM1sxOzM3bVtTQUpKQUQgXSBbJXNdIFwzM1sxOzk3bVtPSzolc3tTQUpKQUR9Q1A6JXNdJyUobG9vcCxsZW4ob2spLGxlbihjcCkpKSwgDQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQ0KICAgICAgICBjaGVja3Mob2ssY3ApDQogICAgZXhjZXB0Og0KICAgICAgICBwYXNzDQogDQogDQogDQojLS0tLS0tLS0tLS0tLS0tLS0tLS0tW0VORCBNRU5VXS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMNCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6DQogICAgeHl6KCk="))